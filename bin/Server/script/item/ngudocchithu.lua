SB_PAGE_INFO = {
"Thu håi mËt tÞch",
"Xem phÇn thø 1 [Th«ng tin c¬ b¶n cña Ngò §éc thÊt ¶i] ",
"Xem phÇn thø 2 [Th«ng tin nh©n vËt][VÒ ®iÓm tÝch lòy] ",
"Xem phÇn thø 3 [Th«ng tin v­ît ¶i][Tin tøc ¶i] ",
"Xem phÇn thø 4 [Sù kiÖn v­ît ¶i]",
"Xem phÇn bªn trªn",
"Xem phÇn bªn d­íi"}

-- Í¨³£ÊÇ·¢ÉúÊÂ¼þºó¼¤»îÏÔÊ¾ÕâÐ©ÐÅÏ¢£¬µ«Ò²ÓÐ¸ö±ðÏ¡ÓÐÐÅÏ¢ÊÇÍ¨¹ýÄ³ÖÖÍ¾¾¶¼¤»îºó²Å»á·´Ó³ÔÚÓÎÏ·ÖÐ¡£
SB_EVENT_CRUSTG = 60		-- ¼ÇÂ¼µ±Ç°·­µ½µÚNÒ³µÄ±äÁ¿ºÅ Task
SB_EVENT_STAGE = {61, 62, 63, 64, 65,  66, 67, 68, 69, 70}		-- ¼ÇÂ¼¹Ø¿¨ÊÂ¼þµÄ±äÁ¿ºÅ Task
SB_STAGE_RECORD = {}
SB_EVENT_TITLE = {
{"  .  ", "  S¬n  ", "      ", "  M«n  ", "      "},
{"  .  ", "  §¹i  ", "      ", "  viÖn  ", "      "},
{"  .  ", "  HËu  ", "  Hoa  ", "  Viªn  ", "      "},
{"  .  ", "  Liªn  ", "  Hoµn   ", "  sµo  ", "      "},
{"  .  ", "  Tµng  ", "  KiÕm  ", "  c¸c  ", "      "},
{"  .  ", "  ?  ", "  ?  ", "  ?  ", "      "},
{"  .  ", "  ?  ", "  ?  ", "  ?  ", "      "},
{"  .  ", "  Tö  ", "  Tróc  ", "  L©m  ", "      "},
{"  .  ", "  KiÕm  ", "      ", "  Trñng  ", "      "},
{"  .  ", "  th«ng  ", "      ", "  Th­êng  ", "      "}}
SB_EVENT_CONT = {
	{"  [Ch­a giÕt ®­îc <color=metal>Chã canh cöa<color> nµo ]",
	 "  [GiÕt nhiÒu <color=metal>Chã canh cöa<color> cã thÓ chäc tøc <color=metal>Gia ®inh phÉn né<color>]",
	 "  [Qua cöa sÏ gÆp rÊt nhiÒu <color=metal>Gia ®inh hé viÖn<color> mai phôc ]",
	 "  [§¸nh b¹i nhiÒu <color=metal>Gia ®inh hé viÖn<color> cã thÓ chäc tøc <color=metal>Tæng qu¶n Ngo¹i viÖn<color>]",
	 "  ??????",
	 "  ??????",
	 "S¬n M«n"},
	{"  [Cã thÓ ®èi tho¹i víi <color=metal>Tæng qu¶n Néi viÖn<color>, chän trùc tiÕp chiÕn ®Êu!]",
	 "  [Gióp <color=metal>Tæng qu¶n Néi viÖn<color> t×m Du Long kiÕm vÒ, cã thÓ cïng h¾n luyÖn tËp vâ nghÖ.]",
	 "  [Khi gióp <color=metal>Tæng qu¶n Néi viÖn<color> t×m Du Long kiÕm cã thÓ thÊy ®­îc BÝch Tµm kiÕm.]",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "§¹i ViÖn"},
	{"  [NÕu <color=metal>N÷ l·o béc<color> ë HËu Hoa Viªn qu¸ nhiÒu cã thÓ lµm kinh ®éng <color=metal>HËu Hoa Viªn nghi tr­îng<color> ]",
	 "  [§i qua v­ên hoa, sÏ khiÕn <color=metal>§¹i tiÓu th­<color> cµng phÉn né.]",
	 "  [NÕu t×m ®­îc <color=metal>Gia ®inh<color> bÞ <color=metal>§¹i tiÓu th­<color> bøc hiÕp, gióp h¾n tr¶ tiÒn chuéc th©n.]",							-- ¿É½»»»»ñµÃÔ¿³×
	 "  [<color=metal>§¹i tiÓu th­<color> sÏ kh«ng qu¸ lµm khã (nÕu ®éi ngò ®Òu lµ n÷)]",
	 "  ??????",
	 "  ??????",
	 "HËu hoa viªn"},
	{"  [LÊy ®­îc 3 viªn kú th¹ch <color=metal>Ngò hµnh kiÕm linh<color> sÏ xuÊt hiÖn]",
	 "  [LÊy ®­îc<color=metal>Kim Ngäc Thè<color>, míi cã thÓ vµo <color=metal>Tµng KiÕm C¸c<color> ]",
	 "  [LÊy ®­îc<color=metal>Méc Ngäc Thè<color>, míi cã thÓ vµo <color=metal>!<color> ]",
	 "  [LÊy ®­îc<color=metal>Háa Ngäc Thè<color>, míi cã thÓ vµo <color=metal>!<color> ]",
	 "  ??????",
	 "  ??????",
	 "Liªn Hoµn Sµo"},
	{"  [Kim quy Kim, Méc quy Méc, Thñy quy Thñy, Háa quy Háa, Thæ quy Thæ, ®Òu lµ <color=metal>T­¬ng ThÕ<color> ]",	-- 70¼¶ÒÔÉÏ Ö»ÔÚÕâÀïµôÂä Ø¤°ï¡¤ÍµÌì»»ÈÕ¾÷Òª		¶ëáÒ¡¤¸²Ë®ÐÄ·¨¾÷Òª
	 "  [Kim sinh Thñy, Thñy sinh Méc, Méc sinh Háa, Háa sinh Thæ, Thæ sinh Kim, ®Òu lµ <color=metal>T­¬ng Sinh<color> ]",	-- 70¼¶ÒÔÉÏ Ö»ÔÚÕâÀïµôÂä ¶ëáÒ¡¤´ó´È´ó±¯Öä¾÷Òª	ÉÙÁÖ¡¤´ó³ËÈçÀ´ÐÄ·¨¾÷Òª
	 "  [Kim kh¾c Méc, Méc kh¾c Thæ, Thæ kh¾c Thñy, Thñy kh¾c Háa, Háa kh¾c Kim, ®Òu lµ <color=metal>T­¬ng Tö<color> ]",	-- 70¼¶ÒÔÉÏ Ö»ÔÚÕâÀïµôÂä ÌÆÃÅ¡¤±©ÓêÀæ»¨Õë¾÷Òª	Îäµ±¡¤²ÐÓ°¾÷ÐÄ·¨
	 "  [Kim tïng Háa, Háa tïng Thñy, Thñy tïng Thæ, Thæ tïng Méc, Méc tïng Kim,®Òu lµ <color=metal>T­¬ng Tr×<color> ]",	-- 60¼¶ÒÔÉÏ Ö»ÔÚÕâÀïµôÂä Îäµ±¡¤ÐþÎä½£Õó¾÷Òª		ÉÙÁÖ¡¤ÂÞººÕó¾÷Òª
	 "  [Kim ph¸ Thæ, Thæ ph¸ Háa, Háa ph¸ Méc, Méc ph¸ Thñy, Thñy ph¸ Kim, ®Òu lµ <color=metal>T­¬ng Ph¸<color> ]",	-- 60¼¶ÒÔÉÏ Ö»ÔÚÕâÀïµôÂä ÉÙÁÖ¡¤ÎÞÏàÉñ¹¦¾÷Òª		Ø¤°ï¡¤×íµû¾÷Òª
	 "  ??????",
	 "Tµng KiÕm c¸c"},
	{"  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "???"},
	{"  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "???"},
	{"  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "Tö Tróc l©m"},
	{"  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "KiÕm Chñng"},
	{"  ??????",
	 "  [§é h¶o h÷u cµng cao, cã thÓ ®Õn gÆp Sø gi¶ Tµng KiÕm kÝch ho¹t r­¬ng, kh«ng tiªu hao Anh Hïng thiÕp]",
	 "  [Khi giÕt qu¸i ë mçi ¶i ®Òu cã thÓ nhËn ®­îc ch×a khãa më R­¬ng tinh chÕ ]",
	 "  ??????",
	 "  ??????",
	 "  ??????",
	 "Th«ng th­êng"}}
SB_UNKNOWN_INFO = "  [?????? ]"
-- ------------------------------------------------------------------------------------------------ <Function> ----
function SB_Page_0()
end
function SB_Page_1()
	local sL1 = "<color=gold>Liªn quan ®Õn S¬n trang<color>: <color=gray>X n¨m Y Ngò §éc thÊt ¶i thiÕt lËp ®Õn nay ch¼ng nh÷ng ®· thu nhËn nhiÒu danh kiÕm trong thiªn h¹, mµ cßn cã c«ng nghÖ ®óc t¹o vò khÝ phßng vÖ lµ tuyÖt kü bÝ truyÒn ®Ö nhÊt trong giang hå. NhiÒu nh©n sÜ t×m ®Õn mong t×m cho m×nh ThÇn Binh B¶o Gi¸p.<color>".."\n"
	local sL2 = ""..""
	local sL3 = ""..""
	local sL4 = "<color=gold>Liªn quan ®Õn Khiªu chiÕn<color>: <color=gray>HiÖn nay trang chñ mêi c¸c nh©n sÜ ®Õn Ngò §éc thÊt ¶i. Nh÷ng ai cã thµnh ý xin ®Õn gÆp sø gi¶ ë T­¬ng D­¬ng<color>.".."\n"
	local sL5 = ""..""
	local sL6 = ""..""
	
	local nStage = GetTask(SB_EVENT_CRUSTG)
	if nStage == 0 then
		nStage = 10
	end
	local sP0 = SB_PAGE_INFO[1].."/SB_Page_0"
	local sP1 = SB_PAGE_INFO[2].."/SB_Page_1"
	local sP2 = SB_PAGE_INFO[3].."/SB_Page_2"
	local sP3 = SB_PAGE_INFO[4].."/SB_Page_3"
	local sP4 = SB_PAGE_INFO[5].."["..SB_EVENT_CONT[nStage][7].."] /SB_Page_Event"
	
	Say("LINK:\\spr\\item\\questkey\\treasuremap_big.spr",0,sL1..sL2..sL3..sL4..sL5..sL6, 5, sP1, sP2, sP3, sP4, sP0)
end
function SB_Page_2()
	local nName = "<color=wood>"..GetName().."<color>"
	local nScore = "<color=wood>"..GetTask(TB_BONUS_SCORE).."<color>"
	local nTime = GetTask(TB_BONUS_TIME)
	local nDataS, nDataM, nDataH = 0, 0, 0
	nDataS = mod(nTime/18,60)
	nDataM = mod(nTime/60/18,60)
	nDataH = nTime/60/60/18
	local nData = "<color=green>"..nDataH.."<color><color=water>:<color><color=green>"..nDataM.."<color><color=water>:<color><color=green>"..nDataS.."<color><color=water>'<color>"
	local nRelation = "<color=wood>"..GetTask(TB_BONUS_RELATION)
	
	local sL1 = "<color=gold>Th«ng tin nh©n vËt<color>: <color=gray>Bao gåm ®iÓm danh väng vµ n¨ng lùc chiÕn ®Êu.<color>".."\n"
	local sL2 = "  Tªn: "..nName.." \tDanh väng: ".." \tChiÕn ®Êu: ".."\n"
	local sL3 = "".."\n"
	local sL4 = "<color=gold>§iÓm tÝch lòy<color>: <color=gray>Tr×nh ®é h¶o h÷u biÓu thÞ tr×nh ®é quan hÖ thÕ lùc trong Ngò §éc thÊt ¶i.<color>".."\n"
	local sL5 = "  TÝch lòy: "..nScore.."  Thêi gian: "..nData.."  Quan hÖ S¬n trang: "..nRelation.."\n"
	local sL6 = "".."\n"	

	local nStage = GetTask(SB_EVENT_CRUSTG)
	if nStage == 0 then
		nStage = 10
	end	
	local sP0 = SB_PAGE_INFO[1].."/SB_Page_0"
	local sP1 = SB_PAGE_INFO[2].."/SB_Page_1"
	local sP2 = SB_PAGE_INFO[3].."/SB_Page_2"
	local sP3 = SB_PAGE_INFO[4].."/SB_Page_3"
	local sP4 = SB_PAGE_INFO[5].."["..SB_EVENT_CONT[nStage][7].."] /SB_Page_Event"
	
	Say("LINK:\\spr\\item\\questkey\\treasuremap_big.spr",0,sL1..sL2..sL4..sL5, 5, sP1, sP2, sP3, sP4, sP0)	
end
function SB_Page_3()
	local nPlayed = GetTask(TB_BONUS_PLAYED)
	local nFinished = GetTask(TB_BONUS_FINISHED)
	local nSRate = "<color=wood>0%<color>"
	if nPlayed ~= 0 then
		nSRate = "<color=wood>"..(nFinished/nPlayed*100).."<color>%"
	end
	local nPlayed = "<color=wood>"..nPlayed.."<color>"
	local nFinished = "<color=wood>"..nFinished.."<color>"
	local nStage = "<color=wood>"..GetTask(TB_BONUS_STAGE).."<color>"
	local nKilled = "<color=wood>"..GetTask(TB_BONUS_KILLED).."<color>"
	local nBecaptain = "<color=wood>"..GetTask(TB_BONUS_BECAPTAIN).."<color>"
	
	local sL1 = "<color=gold>Tin tøc v­ît ¶i<color>: <color=gray>Th«ng qua sè lÇn tham dù vµ sè lÇn ®· th«ng qua ®Ó tÝnh tû lÖ.<color>".."\n"
	local sL2 = "  Sè lÇn tham dù: "..nPlayed.."  Sè lÇn v­ît ¶i: "..nFinished.."  Tû lÖ th«ng qua: "..nSRate.."\n"
	local sL3 = "".."\n"
	local sL4 = "<color=gold>Th«ng tin ¶i<color>: <color=gray>Ghi nhí vµi th«ng tin vuît ¶i ®¬n gi¶n.<color>".."\n"
	local sL5 = "  Tæng sè v­ît ¶i: "..nStage.."  Tæng sè s¸t qu¸i: "..nKilled.."  Sè lÇn ®éi tr­ëng: "..nBecaptain.."\n"
	local sL6 = "".."\n"

	local nStage = GetTask(SB_EVENT_CRUSTG)
	if nStage == 0 then
		nStage = 10
	end
	local sP0 = SB_PAGE_INFO[1].."/SB_Page_0"
	local sP1 = SB_PAGE_INFO[2].."/SB_Page_1"
	local sP2 = SB_PAGE_INFO[3].."/SB_Page_2"
	local sP3 = SB_PAGE_INFO[4].."/SB_Page_3"
	local sP4 = SB_PAGE_INFO[5].."["..SB_EVENT_CONT[nStage][7].."] /SB_Page_Event"
	
	Say("LINK:\\spr\\item\\questkey\\treasuremap_big.spr",0,sL1..sL2..sL4..sL5, 5, sP1, sP2, sP3, sP4, sP0)
end
function SB_Page_Event(nStage)
	if nStage == nil then
		nStage = GetTask(SB_EVENT_CRUSTG)
	end
	if (nStage < 1) or (nStage > 9) then
		nStage = 10
	end
	SetTask(SB_EVENT_CRUSTG, nStage)
	--local sLine = "  [<color=green>----"..SB_EVENT_CONT[nStage][7].."----<color>]".."\n"
	local sLine = ""
	for i=1,5 do
		sLine = sLine.."<color=green>"..SB_EVENT_TITLE[nStage][i].."<color>"
		if GetBit(GetTask(SB_EVENT_STAGE[nStage]), i) == 1 then
			sLine = sLine..SB_EVENT_CONT[nStage][i].."\n"
		else
			sLine = sLine..SB_UNKNOWN_INFO.."\n"
		end
	end
	local nStagePre = GetTask(SB_EVENT_CRUSTG)-1;
	local nStageNext = GetTask(SB_EVENT_CRUSTG)+1;
	local sP0 = SB_PAGE_INFO[6].." ["..SB_EVENT_CONT[nStagePre][7].."]/SB_Page_Event_Pre"
	local sP1 = SB_PAGE_INFO[7].." ["..SB_EVENT_CONT[nStageNext][7].."]/SB_Page_Event_Next"
	local sP2 = SB_PAGE_INFO[3].."/SB_Page_2"
	local sP3 = SB_PAGE_INFO[1].."/SB_Page_0"
	Say("LINK:\\spr\\item\\questkey\\treasuremap_big.spr",0,sLine, 4, sP0, sP1, sP2, sP3)
end
function SB_Page_Event_Pre()
	local nStagePre = GetTask(SB_EVENT_CRUSTG)-1;
	local nStageNext = GetTask(SB_EVENT_CRUSTG)+1;
	SB_Page_Event(nStagePre)
end
function SB_Page_Event_Next()
	local nStagePre = GetTask(SB_EVENT_CRUSTG)-1;
	local nStageNext = GetTask(SB_EVENT_CRUSTG)+1;
	SB_Page_Event(nStageNext)
end

function  main(nItem)
	dofile("script/item/tangkiemchi.lua")
	SB_Page_2()
end

function no()
end